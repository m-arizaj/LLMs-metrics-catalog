"use strict";(self.webpackChunkll_ms_metrics_catalog=self.webpackChunkll_ms_metrics_catalog||[]).push([[7935],{7966:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"metrics/code-structural/dataflow","title":"Data-Flow Match","description":"Introduction","source":"@site/docs/metrics/code-structural/dataflow.md","sourceDirName":"metrics/code-structural","slug":"/metrics/code-structural/dataflow","permalink":"/LLMs-metrics-catalog/metrics/code-structural/dataflow","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"dataflow","title":"Data-Flow Match","sidebar_label":"Data-Flow Match"},"sidebar":"docsSidebar","previous":{"title":"Ranked Retrieval","permalink":"/LLMs-metrics-catalog/metrics/code-structural/ranked-retrieval"},"next":{"title":"Error Metrics","permalink":"/LLMs-metrics-catalog/metrics/functional-test/error"}}');var a=i(4848),s=i(8453);const r={id:"dataflow",title:"Data-Flow Match",sidebar_label:"Data-Flow Match"},l=void 0,o={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Formula",id:"formula",level:2},{value:"Variants",id:"variants",level:2},{value:"1. CodeBLEU Data-Flow Component",id:"1-codebleu-data-flow-component",level:3},{value:"2. General Data-Flow Similarity Metrics",id:"2-general-data-flow-similarity-metrics",level:3},{value:"3. Data-Flow Integrity for Repairs",id:"3-data-flow-integrity-for-repairs",level:3},{value:"Applications in Software Engineering",id:"applications-in-software-engineering",level:2},{value:"Code Generation Evaluation",id:"code-generation-evaluation",level:3},{value:"Code Repair Validation",id:"code-repair-validation",level:3},{value:"Repository-Level Reasoning",id:"repository-level-reasoning",level:3},{value:"Program Understanding &amp; Refactoring",id:"program-understanding--refactoring",level:3},{value:"Interpretation",id:"interpretation",level:2},{value:"High Data-Flow Match",id:"high-data-flow-match",level:3},{value:"Low Data-Flow Match",id:"low-data-flow-match",level:3},{value:"Strengths",id:"strengths",level:3},{value:"Limitations",id:"limitations",level:3},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",annotation:"annotation",blockquote:"blockquote",br:"br",em:"em",h2:"h2",h3:"h3",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mo:"mo",mrow:"mrow",msub:"msub",mtext:"mtext",ol:"ol",p:"p",semantics:"semantics",span:"span",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsx)(n.p,{children:"Data-Flow Match evaluates how closely the semantic data-flow structure of generated code aligns with a reference implementation. Unlike surface-level similarity metrics (BLEU, ROUGE) or pure syntactic metrics (AST match), data-flow match analyzes how variables are defined, propagate, and interact across operations."}),"\n",(0,a.jsx)(n.p,{children:"Loosely, it measures whether the generated program preserves the logical computation performed by the reference program."}),"\n",(0,a.jsx)(n.p,{children:"A recent survey on LLM code evaluation highlights that data-flow analysis provides a deeper semantic view of similarity:"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["\u201cSemantic data flow matching evaluates the semantic similarity of code by analyzing the data flow diagrams within the code\u2026 helping CodeBLEU deeply understand the internal logic and functionality.\u201d",(0,a.jsx)(n.br,{}),"\n","(Survey on Evaluating Large Language Models in Code Generation Tasks, p. 5)"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Additionally, the one-shot correction study emphasizes that correct repairs must preserve the data-flow of variables; failure to do so implies incorrect behavior even if the syntax looks valid:"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["\u201cEnhancement\u2026 involves preserving the data-flow of each variable\u2026 and bridging the data-flow gap between code snippets.\u201d",(0,a.jsx)(n.br,{}),"\n","(Rethinking AI Code Generation: A One-Shot Correction Approach Based on User Feedback)"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Together, these show that Data-Flow Match acts as a static semantic metric approximating functional correctness."}),"\n",(0,a.jsx)(n.h2,{id:"formula",children:"Formula"}),"\n",(0,a.jsxs)(n.p,{children:["The CodeBLEU framework does not publish a single closed-form formula specifically named \u201cData-Flow Match,\u201d but its computation is conceptually defined as comparing the sets of data-flow edges (definition\u2013use relations) extracted from reference code ",(0,a.jsx)(n.span,{className:"katex",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsxs)(n.msub,{children:[(0,a.jsx)(n.mi,{children:"C"}),(0,a.jsx)(n.mtext,{children:"ref"})]})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"C_{\\text{ref}}"})]})})})," and generated code ",(0,a.jsx)(n.span,{className:"katex",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsxs)(n.msub,{children:[(0,a.jsx)(n.mi,{children:"C"}),(0,a.jsx)(n.mtext,{children:"gen"})]})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"C_{\\text{gen}}"})]})})}),"."]}),"\n",(0,a.jsx)(n.p,{children:"Let:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.span,{className:"katex",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mi,{children:"D"}),(0,a.jsx)(n.mi,{children:"F"}),(0,a.jsx)(n.mo,{stretchy:"false",children:"("}),(0,a.jsx)(n.mi,{children:"C"}),(0,a.jsx)(n.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"DF(C)"})]})})})," = set of data-flow edges in code ",(0,a.jsx)(n.span,{className:"katex",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsx)(n.mrow,{children:(0,a.jsx)(n.mi,{children:"C"})}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"C"})]})})})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.span,{className:"katex",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mi,{children:"e"}),(0,a.jsx)(n.mo,{children:"="}),(0,a.jsx)(n.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(n.msub,{children:[(0,a.jsx)(n.mi,{children:"v"}),(0,a.jsx)(n.mtext,{children:"def"})]}),(0,a.jsx)(n.mo,{separator:"true",children:","}),(0,a.jsxs)(n.msub,{children:[(0,a.jsx)(n.mi,{children:"v"}),(0,a.jsx)(n.mtext,{children:"use"})]}),(0,a.jsx)(n.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"e = (v_{\\text{def}}, v_{\\text{use}})"})]})})})," represent a def\u2013use pair"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"A common abstract formulation is:"}),"\n",(0,a.jsx)(n.span,{className:"katex",children:(0,a.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,a.jsxs)(n.semantics,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mtext,{children:"DataFlowMatch"}),(0,a.jsx)(n.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(n.msub,{children:[(0,a.jsx)(n.mi,{children:"C"}),(0,a.jsx)(n.mtext,{children:"gen"})]}),(0,a.jsx)(n.mo,{separator:"true",children:","}),(0,a.jsxs)(n.msub,{children:[(0,a.jsx)(n.mi,{children:"C"}),(0,a.jsx)(n.mtext,{children:"ref"})]}),(0,a.jsx)(n.mo,{stretchy:"false",children:")"}),(0,a.jsx)(n.mo,{children:"="}),(0,a.jsxs)(n.mfrac,{children:[(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mi,{mathvariant:"normal",children:"\u2223"}),(0,a.jsx)(n.mi,{children:"D"}),(0,a.jsx)(n.mi,{children:"F"}),(0,a.jsx)(n.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(n.msub,{children:[(0,a.jsx)(n.mi,{children:"C"}),(0,a.jsx)(n.mtext,{children:"gen"})]}),(0,a.jsx)(n.mo,{stretchy:"false",children:")"}),(0,a.jsx)(n.mo,{children:"\u2229"}),(0,a.jsx)(n.mi,{children:"D"}),(0,a.jsx)(n.mi,{children:"F"}),(0,a.jsx)(n.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(n.msub,{children:[(0,a.jsx)(n.mi,{children:"C"}),(0,a.jsx)(n.mtext,{children:"ref"})]}),(0,a.jsx)(n.mo,{stretchy:"false",children:")"}),(0,a.jsx)(n.mi,{mathvariant:"normal",children:"\u2223"})]}),(0,a.jsxs)(n.mrow,{children:[(0,a.jsx)(n.mi,{mathvariant:"normal",children:"\u2223"}),(0,a.jsx)(n.mi,{children:"D"}),(0,a.jsx)(n.mi,{children:"F"}),(0,a.jsx)(n.mo,{stretchy:"false",children:"("}),(0,a.jsxs)(n.msub,{children:[(0,a.jsx)(n.mi,{children:"C"}),(0,a.jsx)(n.mtext,{children:"ref"})]}),(0,a.jsx)(n.mo,{stretchy:"false",children:")"}),(0,a.jsx)(n.mi,{mathvariant:"normal",children:"\u2223"})]})]})]}),(0,a.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\text{DataFlowMatch}(C_{\\text{gen}}, C_{\\text{ref}}) \n= \n\\frac{| DF(C_{\\text{gen}}) \\cap DF(C_{\\text{ref}}) |}\n{| DF(C_{\\text{ref}}) |}"})]})})}),"\n",(0,a.jsx)(n.p,{children:"This captures:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"how many reference data-flow relations appear in generated code,"}),"\n",(0,a.jsx)(n.li,{children:"normalized by the total number of data-flow relationships in the reference."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"This representation is consistent with the survey\u2019s description of \u201cmatching data-flow diagrams\u201d as part of semantic similarity and with typical CodeBLEU-style implementations."}),"\n",(0,a.jsx)(n.h2,{id:"variants",children:"Variants"}),"\n",(0,a.jsx)(n.h3,{id:"1-codebleu-data-flow-component",children:"1. CodeBLEU Data-Flow Component"}),"\n",(0,a.jsx)(n.p,{children:"CodeBLEU uses Data-Flow Match as one of its semantic submetrics:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"matches variable dependencies"}),"\n",(0,a.jsx)(n.li,{children:"compares definition\u2013use chains"}),"\n",(0,a.jsx)(n.li,{children:"checks whether generated programs preserve semantic execution paths"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"It is combined with:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"n-gram match"}),"\n",(0,a.jsx)(n.li,{children:"AST match"}),"\n",(0,a.jsx)(n.li,{children:"other components into a single CodeBLEU score."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"2-general-data-flow-similarity-metrics",children:"2. General Data-Flow Similarity Metrics"}),"\n",(0,a.jsx)(n.p,{children:"The survey notes that data-flow analysis is broadly applicable beyond CodeBLEU:"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"\u201cData flow analysis assesses code quality by comparing the similarity of data flows between generated and reference code\u2026 providing a deeper understanding of the code\u2019s semantics.\u201d"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Variants include:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"strict edge matching"}),"\n",(0,a.jsx)(n.li,{children:"graph similarity between data-flow graphs"}),"\n",(0,a.jsx)(n.li,{children:"variable-level flow preservation scores"}),"\n",(0,a.jsx)(n.li,{children:"data-flow\u2013aware clone/similarity measures"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"3-data-flow-integrity-for-repairs",children:"3. Data-Flow Integrity for Repairs"}),"\n",(0,a.jsxs)(n.p,{children:["In the one-shot correction paper, data-flow is framed as a ",(0,a.jsx)(n.em,{children:"constraint on valid repair"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"correct repairs should preserve the data-flow of variables"}),"\n",(0,a.jsx)(n.li,{children:"data-flow mismatches signal incorrect behavior, even when syntax is valid"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"While not formalized as a separate metric there, it supports using Data-Flow Match as a correctness-sensitive semantic signal."}),"\n",(0,a.jsx)(n.h2,{id:"applications-in-software-engineering",children:"Applications in Software Engineering"}),"\n",(0,a.jsx)(n.h3,{id:"code-generation-evaluation",children:"Code Generation Evaluation"}),"\n",(0,a.jsx)(n.p,{children:"Data-Flow Match helps detect:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"incorrect variable propagation"}),"\n",(0,a.jsx)(n.li,{children:"missing or extraneous assignments"}),"\n",(0,a.jsx)(n.li,{children:"swapped or inverted computation steps"}),"\n",(0,a.jsx)(n.li,{children:"dead or unused variable patterns"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"This is especially important where two pieces of code may look similar (tokens/AST) but implement different logic."}),"\n",(0,a.jsx)(n.h3,{id:"code-repair-validation",children:"Code Repair Validation"}),"\n",(0,a.jsx)(n.p,{children:"Data-flow preservation ensures:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"the fixed code maintains the intended logic"}),"\n",(0,a.jsx)(n.li,{children:"variables are neither dropped nor misused"}),"\n",(0,a.jsx)(n.li,{children:"the repair does not introduce hidden semantic regressions"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"One-shot correction approaches explicitly call out bridging \u201cdata-flow gaps\u201d as necessary for correct repairs."}),"\n",(0,a.jsx)(n.h3,{id:"repository-level-reasoning",children:"Repository-Level Reasoning"}),"\n",(0,a.jsx)(n.p,{children:"On larger projects, data-flow mismatch across functions or modules can cause:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"integration bugs"}),"\n",(0,a.jsx)(n.li,{children:"wrong state propagation"}),"\n",(0,a.jsx)(n.li,{children:"API misuse"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Data-flow\u2013based metrics can therefore support repository-level evaluation."}),"\n",(0,a.jsx)(n.h3,{id:"program-understanding--refactoring",children:"Program Understanding & Refactoring"}),"\n",(0,a.jsx)(n.p,{children:"Data-flow analysis naturally supports:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"semantic clone detection"}),"\n",(0,a.jsx)(n.li,{children:"behavior-preserving refactor checks"}),"\n",(0,a.jsx)(n.li,{children:"semantic search (e.g., \u201cfind code that computes this thing similarly\u201d)"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Data-Flow Match can underlie these evaluations as a quantitative metric."}),"\n",(0,a.jsx)(n.h2,{id:"interpretation",children:"Interpretation"}),"\n",(0,a.jsx)(n.h3,{id:"high-data-flow-match",children:"High Data-Flow Match"}),"\n",(0,a.jsx)(n.p,{children:"Indicates:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"strong semantic preservation"}),"\n",(0,a.jsx)(n.li,{children:"behaviorally similar programs"}),"\n",(0,a.jsx)(n.li,{children:"correct variable usage patterns"}),"\n",(0,a.jsx)(n.li,{children:"faithful reproduction of the underlying logic"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"low-data-flow-match",children:"Low Data-Flow Match"}),"\n",(0,a.jsx)(n.p,{children:"Indicates:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"incorrect semantics despite surface similarity"}),"\n",(0,a.jsx)(n.li,{children:"broken or missing variable flows"}),"\n",(0,a.jsx)(n.li,{children:"wrong dependencies or misordered logic"}),"\n",(0,a.jsx)(n.li,{children:"logical errors hidden behind valid syntax"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"strengths",children:"Strengths"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Captures semantic similarity beyond tokens/AST"}),"\n",(0,a.jsx)(n.li,{children:"Aligns more closely with human judgments of correctness than n-gram metrics"}),"\n",(0,a.jsx)(n.li,{children:"Language-general in principle, if parsers/data-flow tools exist"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"limitations",children:"Limitations"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Requires reliable parsing and data-flow extraction (tooling heavy)"}),"\n",(0,a.jsx)(n.li,{children:"Cannot be computed if code does not parse or is incomplete"}),"\n",(0,a.jsx)(n.li,{children:"Still only approximates full functional correctness"}),"\n",(0,a.jsx)(n.li,{children:"Dynamic features (reflection, dynamic typing) complicate analysis"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Survey on code evaluation & CodeBLEU/data-flow"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["A Survey on Evaluating Large Language Models in Code Generation Tasks. (2024).",(0,a.jsx)(n.br,{}),"\n","Data-flow matching and semantic similarity discussion (CodeBLEU component and \u201cother similarity methods\u201d).",(0,a.jsx)(n.br,{}),"\n",(0,a.jsx)(n.a,{href:"https://doi.org/10.48550/arXiv.2408.16498",children:"https://doi.org/10.48550/arXiv.2408.16498"})]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.em,{children:"One-shot correction & data-flow integrity"}),(0,a.jsx)(n.br,{}),"\n","2. Rethinking AI Code Generation: A One-Shot Correction Approach Based on User Feedback. (2024). Automated Software Engineering ",(0,a.jsx)(n.a,{href:"https://doi.org/10.1007/s10515-024-00451-y",children:"https://doi.org/10.1007/s10515-024-00451-y"})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var t=i(6540);const a={},s=t.createContext(a);function r(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);