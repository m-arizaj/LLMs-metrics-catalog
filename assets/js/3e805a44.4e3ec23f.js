"use strict";(self.webpackChunkll_ms_metrics_catalog=self.webpackChunkll_ms_metrics_catalog||[]).push([[8025],{5219:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>x,frontMatter:()=>l,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"metrics/generative/density","title":"Density","description":"Introduction","source":"@site/docs/metrics/generative/density.md","sourceDirName":"metrics/generative","slug":"/metrics/generative/density","permalink":"/LLMs-metrics-catalog/metrics/generative/density","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"density","title":"Density","sidebar_label":"Density"},"sidebar":"docsSidebar","previous":{"title":"AMBER Score","permalink":"/LLMs-metrics-catalog/metrics/generative/amber-score"},"next":{"title":"FD (Fr\xe9chet Distance)","permalink":"/LLMs-metrics-catalog/metrics/generative/fd"}}');var r=n(4848),t=n(8453);const l={id:"density",title:"Density",sidebar_label:"Density"},a=void 0,c={},h=[{value:"Introduction",id:"introduction",level:2},{value:"1. Density",id:"1-density",level:2},{value:"Definition",id:"definition",level:3},{value:"Purpose",id:"purpose",level:3},{value:"Applications",id:"applications",level:3},{value:"Limitations",id:"limitations",level:3},{value:"References",id:"references",level:2},{value:"Additional References",id:"additional-references",level:2}];function d(e){const s={a:"a",annotation:"annotation",em:"em",h2:"h2",h3:"h3",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",msubsup:"msubsup",msup:"msup",munderover:"munderover",p:"p",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsxs)(s.p,{children:["Density is an automatic evaluation metric used to diagnose the performance of generative models, particularly in image synthesis. It was introduced by ",(0,r.jsx)(s.strong,{children:"Naeem et al. (2020)"})," as part of a metric pair, ",(0,r.jsx)(s.strong,{children:"Density and Coverage"}),", designed to reliably and separately measure a model's fidelity and diversity, respectively."]}),"\n",(0,r.jsxs)(s.p,{children:["These metrics work by analyzing the ",(0,r.jsx)(s.em,{children:"k-nearest neighbors"})," (k-NN) relationships between the distributions of real and generated samples in a feature space (produced by an ",(0,r.jsx)(s.em,{children:"encoder"}),"). Density is specifically used as a proxy for the ",(0,r.jsx)(s.strong,{children:"fidelity"}),' of the generated samples\u2014that is, how "realistic" they are.']}),"\n",(0,r.jsx)(s.h2,{id:"1-density",children:"1. Density"}),"\n",(0,r.jsx)(s.h3,{id:"definition",children:"Definition"}),"\n",(0,r.jsx)(s.p,{children:'Density quantifies how well-populated the generated samples are relative to the real samples in the feature space. Specifically, it "counts how many real-sample neighborhood spheres contain the [generated] sample." A higher Density value suggests better fidelity, indicating that the generated samples fall into regions that are densely populated by real training samples.'}),"\n",(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"D"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsx)(s.mi,{children:"n"}),(0,r.jsx)(s.mi,{children:"s"}),(0,r.jsx)(s.mi,{children:"i"}),(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"y"}),(0,r.jsx)(s.mo,{stretchy:"false",children:"("}),(0,r.jsx)(s.mo,{stretchy:"false",children:"{"}),(0,r.jsxs)(s.msubsup,{children:[(0,r.jsx)(s.mi,{children:"x"}),(0,r.jsx)(s.mi,{children:"i"}),(0,r.jsx)(s.mi,{children:"g"})]}),(0,r.jsxs)(s.msubsup,{children:[(0,r.jsx)(s.mo,{stretchy:"false",children:"}"}),(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"i"}),(0,r.jsx)(s.mo,{children:"="}),(0,r.jsx)(s.mn,{children:"1"})]}),(0,r.jsx)(s.mi,{children:"n"})]}),(0,r.jsx)(s.mo,{separator:"true",children:","}),(0,r.jsx)(s.mo,{stretchy:"false",children:"{"}),(0,r.jsxs)(s.msubsup,{children:[(0,r.jsx)(s.mi,{children:"x"}),(0,r.jsx)(s.mi,{children:"j"}),(0,r.jsx)(s.mi,{children:"r"})]}),(0,r.jsxs)(s.msubsup,{children:[(0,r.jsx)(s.mo,{stretchy:"false",children:"}"}),(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"j"}),(0,r.jsx)(s.mo,{children:"="}),(0,r.jsx)(s.mn,{children:"1"})]}),(0,r.jsx)(s.mi,{children:"m"})]}),(0,r.jsx)(s.mo,{stretchy:"false",children:")"}),(0,r.jsx)(s.mo,{children:"="}),(0,r.jsxs)(s.mfrac,{children:[(0,r.jsx)(s.mn,{children:"1"}),(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"k"}),(0,r.jsx)(s.mi,{children:"n"})]})]}),(0,r.jsxs)(s.munderover,{children:[(0,r.jsx)(s.mo,{children:"\u2211"}),(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"i"}),(0,r.jsx)(s.mo,{children:"="}),(0,r.jsx)(s.mn,{children:"1"})]}),(0,r.jsx)(s.mi,{children:"n"})]}),(0,r.jsxs)(s.munderover,{children:[(0,r.jsx)(s.mo,{children:"\u2211"}),(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"j"}),(0,r.jsx)(s.mo,{children:"="}),(0,r.jsx)(s.mn,{children:"1"})]}),(0,r.jsx)(s.mi,{children:"m"})]}),(0,r.jsx)(s.mn,{children:"1"}),(0,r.jsx)(s.mo,{stretchy:"false",children:"("}),(0,r.jsxs)(s.msubsup,{children:[(0,r.jsx)(s.mi,{children:"x"}),(0,r.jsx)(s.mi,{children:"i"}),(0,r.jsx)(s.mi,{children:"g"})]}),(0,r.jsx)(s.mo,{children:"\u2208"}),(0,r.jsx)(s.mi,{children:"B"}),(0,r.jsx)(s.mo,{stretchy:"false",children:"("}),(0,r.jsxs)(s.msubsup,{children:[(0,r.jsx)(s.mi,{children:"x"}),(0,r.jsx)(s.mi,{children:"j"}),(0,r.jsx)(s.mi,{children:"r"})]}),(0,r.jsx)(s.mo,{separator:"true",children:","}),(0,r.jsx)(s.mi,{children:"N"}),(0,r.jsx)(s.mi,{children:"N"}),(0,r.jsxs)(s.msub,{children:[(0,r.jsx)(s.mi,{children:"D"}),(0,r.jsx)(s.mi,{children:"k"})]}),(0,r.jsx)(s.mo,{stretchy:"false",children:"("}),(0,r.jsxs)(s.msubsup,{children:[(0,r.jsx)(s.mi,{children:"x"}),(0,r.jsx)(s.mi,{children:"j"}),(0,r.jsx)(s.mi,{children:"r"})]}),(0,r.jsx)(s.mo,{stretchy:"false",children:")"}),(0,r.jsx)(s.mo,{stretchy:"false",children:")"}),(0,r.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"Density(\\{x_{i}^{g}\\}_{i=1}^{n},\\{x_{j}^{r}\\}_{j=1}^{m})=\\frac{1}{kn}\\sum_{i=1}^{n}\\sum_{j=1}^{m}1(x_{i}^{g}\\in B(x_{j}^{r},NND_{k}(x_{j}^{r})))"})]})})}),"\n",(0,r.jsx)(s.p,{children:"where:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mo,{stretchy:"false",children:"{"}),(0,r.jsxs)(s.msup,{children:[(0,r.jsx)(s.mi,{children:"x"}),(0,r.jsx)(s.mi,{children:"g"})]}),(0,r.jsx)(s.mo,{stretchy:"false",children:"}"})]}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\{x^{g}\\}"})]})})})," = the set of ",(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsx)(s.mrow,{children:(0,r.jsx)(s.mi,{children:"n"})}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"n"})]})})})," generated samples."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mo,{stretchy:"false",children:"{"}),(0,r.jsxs)(s.msup,{children:[(0,r.jsx)(s.mi,{children:"x"}),(0,r.jsx)(s.mi,{children:"r"})]}),(0,r.jsx)(s.mo,{stretchy:"false",children:"}"})]}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\{x^{r}\\}"})]})})})," = the set of ",(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsx)(s.mrow,{children:(0,r.jsx)(s.mi,{children:"m"})}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"m"})]})})})," real (training) samples."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"N"}),(0,r.jsx)(s.mi,{children:"N"}),(0,r.jsxs)(s.msub,{children:[(0,r.jsx)(s.mi,{children:"D"}),(0,r.jsx)(s.mi,{children:"k"})]}),(0,r.jsx)(s.mo,{stretchy:"false",children:"("}),(0,r.jsxs)(s.msubsup,{children:[(0,r.jsx)(s.mi,{children:"x"}),(0,r.jsx)(s.mi,{children:"j"}),(0,r.jsx)(s.mi,{children:"r"})]}),(0,r.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"NND_{k}(x_{j}^{r})"})]})})})," = the distance from a real sample ",(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsx)(s.mrow,{children:(0,r.jsxs)(s.msubsup,{children:[(0,r.jsx)(s.mi,{children:"x"}),(0,r.jsx)(s.mi,{children:"j"}),(0,r.jsx)(s.mi,{children:"r"})]})}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"x_j^r"})]})})})," to its ",(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsx)(s.mrow,{children:(0,r.jsx)(s.mi,{children:"k"})}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"k"})]})})}),"-th nearest neighbor ",(0,r.jsx)(s.em,{children:"within the real set"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"B"}),(0,r.jsx)(s.mo,{stretchy:"false",children:"("}),(0,r.jsx)(s.mi,{children:"x"}),(0,r.jsx)(s.mo,{separator:"true",children:","}),(0,r.jsx)(s.mi,{children:"r"}),(0,r.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"B(x, r)"})]})})})," = a Euclidean ball centered at ",(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsx)(s.mrow,{children:(0,r.jsx)(s.mi,{children:"x"})}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"x"})]})})})," with radius ",(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsx)(s.mrow,{children:(0,r.jsx)(s.mi,{children:"r"})}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"r"})]})})}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsx)(s.mrow,{children:(0,r.jsx)(s.mi,{children:"k"})}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"k"})]})})})," = the number of neighbors (the paper uses ",(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"k"}),(0,r.jsx)(s.mo,{children:"="}),(0,r.jsx)(s.mn,{children:"5"})]}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"k=5"})]})})}),"). ]"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"*(Definition from Naeem et al., 2020, as described in"}),"\n",(0,r.jsx)(s.h3,{id:"purpose",children:"Purpose"}),"\n",(0,r.jsxs)(s.p,{children:["Density is used as a proxy to measure sample ",(0,r.jsx)(s.strong,{children:"fidelity"})," (quality or realism)."]}),"\n",(0,r.jsx)(s.h3,{id:"applications",children:"Applications"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Diagnosing the performance of generative models."}),"\n",(0,r.jsx)(s.li,{children:"The provided paper uses it to evaluate image generation models on datasets like CIFAR10, ImageNet, FFHQ, and LSUN-Bedroom."}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"limitations",children:"Limitations"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Its calculation is based on k-nearest neighbors and can be sensitive to the choice of ",(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsx)(s.mrow,{children:(0,r.jsx)(s.mi,{children:"k"})}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"k"})]})})})," and the number of samples used (the paper uses ",(0,r.jsx)(s.span,{className:"katex",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"k"}),(0,r.jsx)(s.mo,{children:"="}),(0,r.jsx)(s.mn,{children:"5"})]}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"k=5"})]})})})," and 10,000 samples)."]}),"\n",(0,r.jsx)(s.li,{children:"The paper finds that other metrics, like Fr\xe9chet Distance (FD) with a robust encoder (e.g., DINOv2), correlate better with human judgments of fidelity than k-NN metrics like Precision (and by extension, Density)."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"references",children:"References"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Stein, G., Cresswell, J. C., Hosseinzadeh, R., Sui, Y., Ross, B. L., Villecroze, V., Liu, Z., Caterini, A. L., Taylor, J. E. T., & Loaiza-Ganem, G. (2023). ",(0,r.jsx)(s.em,{children:"Exposing flaws of generative model evaluation metrics and their unfair treatment of diffusion models"}),". ",(0,r.jsx)(s.a,{href:"https://arxiv.org/abs/2306.04675v2",children:"arXiv:2306.04675v2"})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Naeem, M. F., Oh, S. J., Uh, Y., Choi, Y., & Yoo, J. (2020). ",(0,r.jsx)(s.em,{children:"Reliable fidelity and diversity metrics for generative models"}),". In International Conference on Machine Learning (ICML). ",(0,r.jsx)(s.a,{href:"https://arxiv.org/abs/2002.09797",children:"\tarXiv:2002.09797"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"additional-references",children:"Additional References"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"67"}),"\n"]})]})}function x(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>a});var i=n(6540);const r={},t=i.createContext(r);function l(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);